KSP_MODEL_SHADER:NEEDS[ModularLaunchPads]
{
	name = Atlas_MLP_TU
		
		model = ModularLaunchPads/Launch_Stands/MiniServiceTower4
		model = ModularLaunchPads/Launch_Stands/AtlasUmbilicalArmAgena
		
	MATERIAL
	{
		shader = TU/Metallic
		
		inheritTexture = _MainTex
		inheritTexture = _BumpMap
		inheritTexture = _Emissive
		
		float = _Metal, 0.0
		float = _Smoothness, 0.41
		color = _Color, 1.15, 1.15, 1.15

		excludeMesh = emit
		excludeMesh = Emit
		excludeMesh = innerGlow
        excludeMesh = innerGlow 1
		excludeMesh = flagTransform
		excludeMesh = Flag
		
		
		excludeMesh = MiniTower4Core_LaunchStand
		excludeMesh = MiniTower4Rail_LaunchStand
		excludeMesh = MiniTower4CoreBeam_LaunchStand
		excludeMesh = MiniTower4Side1_LaunchStand
		excludeMesh = MiniTower4Front1_LaunchStand
		excludeMesh = MiniTower4Pipe1Center_LaunchStand
		excludeMesh = AgenaArmMount_AgenaArmMount_auv
		excludeMesh = AgenaArm_AgenaArm_auv
		excludeMesh = AgenaArmExt1_AgenaArm_auv
		excludeMesh = AgenaArmExtTop_AgenaArm_auv
		excludeMesh = AgenaArmExtTop_PipeStand
		excludeMesh = UmbPipe2EndB_UmbPipe_auv
		
		Mesh = MiniTower4Pipe1Center_PipeStand
		Mesh = MiniTower4Side1_PipeStand
		Mesh = AgenaArm_PipeStand
		Mesh = AgenaArmExt1_PipeStand
		Mesh = ThorUmbMount_UmbPipe_auv
		Mesh = AgenaArmUmbPlate_AgenaArm_auv
		Mesh = UmbPipe2S1B_UmbPipe_auv
		Mesh = UmbPipe2S2B_UmbPipe_auv
		
		
	}
	
	MATERIAL
	{
		shader = TU/Metallic
		
		inheritTexture = _MainTex
		inheritTexture = _BumpMap
		inheritTexture = _Emissive
		
		float = _Metal, 0.0
		float = _Smoothness, 0.81
		color = _Color, 1.15, 1.15, 1.15

		excludeMesh = emit
		excludeMesh = Emit
		excludeMesh = innerGlow
        excludeMesh = innerGlow 1
		excludeMesh = flagTransform
		excludeMesh = Flag
		
		Mesh = MiniTower4Core_LaunchStand
		Mesh = MiniTower4Rail_LaunchStand
		Mesh = MiniTower4CoreBeam_LaunchStand
		Mesh = MiniTower4Side1_LaunchStand
		Mesh = MiniTower4Front1_LaunchStand
		Mesh = MiniTower4Pipe1Center_LaunchStand
		Mesh = AgenaArmMount_AgenaArmMount_auv
		Mesh = AgenaArm_AgenaArm_auv
		Mesh = AgenaArmExt1_AgenaArm_auv
		Mesh = AgenaArmExtTop_AgenaArm_auv
		Mesh = AgenaArmExtTop_PipeStand
		Mesh = UmbPipe2EndB_UmbPipe_auv
		
		excludeMesh = MiniTower4Pipe1Center_PipeStand
		excludeMesh = MiniTower4Side1_PipeStand
		excludeMesh = AgenaArm_PipeStand
		excludeMesh = AgenaArmExt1_PipeStand
		excludeMesh = ThorUmbMount_UmbPipe_auv
		excludeMesh = AgenaArmUmbPlate_AgenaArm_auv
		excludeMesh = UmbPipe2S1B_UmbPipe_auv
		excludeMesh = UmbPipe2S2B_UmbPipe_auv
		
	}
}

KSP_MODEL_SHADER:NEEDS[ModularLaunchPads]
{
	name = Atlas_MLP_LaunchStand_TU
		
		model = ModularLaunchPads/Launch_Stands/AtlasLaunchStand
		
	MATERIAL
	{
		shader = TU/Metallic
		
		inheritTexture = _MainTex
		inheritTexture = _BumpMap
		inheritTexture = _Emissive

		excludeMesh = emit
		excludeMesh = Emit
		excludeMesh = innerGlow
        excludeMesh = innerGlow 1
		excludeMesh = flagTransform
		excludeMesh = Flag
		
		Mesh = AtlasStandFoot2_AtlasStand_auv
		
		excludeMesh =  AtlasStandAlt_PipeStand
		excludeMesh =  AtlasUmbMount_PipeStand
		excludeMesh =  AtlasUmbMountExt2_PipeStand
		excludeMesh =  AtlasPipeConnector2L_AtlasStand_auv
		excludeMesh =  AtlasPipeConnector2L_PipeStand
		
		excludeMesh = AtlasUmb_AtlasUmb_auv
		excludeMesh = AtlasStandCol2_AtlasStand_auv
		excludeMesh = AtlasStandCap2_AtlasStand_auv
		excludeMesh = AtlasStandAlt_AtlasStand_auv
		excludeMesh = AtlasUmbMount_AtlasUmb_auv
		excludeMesh =  AtlasClampWhole_AtlasClamp
		
		PROPERTY
		{
			name = _Metal
			float = 0.0
		}
		PROPERTY
		{
			name = _Smoothness
			float = 0.41
		}
		
	}
	
	MATERIAL
	{
		shader = TU/Metallic
		
		inheritTexture = _MainTex
		inheritTexture = _BumpMap
		inheritTexture = _Emissive
		
		float = _Metal, 0.0
		float = _Smoothness, 0.61
		color = _Color, 1.15, 1.15, 1.15
		
		excludeMesh = emit
		excludeMesh = Emit
		excludeMesh = innerGlow
        excludeMesh = innerGlow 1
		excludeMesh = flagTransform
		excludeMesh = Flag
		
		excludeMeshh = AtlasStandFoot2_AtlasStand_auv
		
		Mesh =  AtlasStandAlt_PipeStand
		Mesh =  AtlasUmbMount_PipeStand
		Mesh =  AtlasUmbMountExt2_PipeStand
		Mesh =  AtlasPipeConnector2L_AtlasStand_auv
		Mesh =  AtlasPipeConnector2L_PipeStand
		
		excludeMesh = AtlasUmb_AtlasUmb_auv
		excludeMesh = AtlasStandCol2_AtlasStand_auv
		excludeMesh = AtlasStandCap2_AtlasStand_auv
		excludeMesh = AtlasStandAlt_AtlasStand_auv
		excludeMesh = AtlasUmbMount_AtlasUmb_auv
		excludeMesh =  AtlasClampWhole_AtlasClamp
		
		
	}
	
	MATERIAL
	{
		shader = TU/Metallic
		
		inheritTexture = _MainTex
		inheritTexture = _BumpMap
		inheritTexture = _Emissive
		
		float = _Metal, 1.0
		float = _Smoothness, 0.51
		color = _Color, 1.15, 1.15, 1.15

		excludeMesh = emit
		excludeMesh = Emit
		excludeMesh = innerGlow
        excludeMesh = innerGlow 1
		excludeMesh = flagTransform
		excludeMesh = Flag
		
		excludeMesh = AtlasStandFoot2_AtlasStand_auv
		
		excludeMesh =  AtlasStandAlt_PipeStand
		excludeMesh =  AtlasUmbMount_PipeStand
		excludeMesh =  AtlasUmbMountExt2_PipeStand
		excludeMesh =  AtlasPipeConnector2L_AtlasStand_auv
		excludeMesh =  AtlasPipeConnector2L_PipeStand
		
		Mesh = AtlasUmb_AtlasUmb_auv
		Mesh = AtlasStandCol2_AtlasStand_auv
		Mesh = AtlasStandCap2_AtlasStand_auv
		Mesh = AtlasStandAlt_AtlasStand_auv
		Mesh = AtlasUmbMount_AtlasUmb_auv
		Mesh =  AtlasClampWhole_AtlasClamp
		
		
	}
}

KSP_TEXTURE_SET
{
	name = AtlasEngines
	title = Atlas Engines
	recolorable = false
		
	MATERIAL
	{
		shader = TU/Metallic

		texture = _MainTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Engines_Shiny
		texture = _MetallicGlossMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Engines_MetallicSmoothness
		texture = _Emission, Bluedog_DB/Parts/Atlas/bluedog_Atlas_Engines_Emissive
		texture = _BumpMap, Bluedog_DB/Parts/Atlas/bluedog_Atlas_Engines_NRM
		texture = _AOMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Engines_MetallicSmoothness
		
		mode = update
		
		excludeMesh = flagTransform
		excludeMesh = Flag
	}
}

KSP_TEXTURE_SET
{
	name = AtlasEnginesRecolour
	title = Engines Recolour
	recolorable = true
		
	MATERIAL
	{
		shader = TU/Metallic

		texture = _MainTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Engines_Shiny
		texture = _MetallicGlossMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Engines_MetallicSmoothness
		texture = _Emission, Bluedog_DB/Parts/Atlas/bluedog_Atlas_Engines_Emissive
		texture = _BumpMap, Bluedog_DB/Parts/Atlas/bluedog_Atlas_Engines_NRM
		texture = _AOMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Engines_MetallicSmoothness
		texture = _MaskTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Engines_MASK
		texture = _MetalGlossNormMask, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Engines_MASK_Metallic
		
		keyword = TU_RECOLOR
		keyword = TU_RECOLOR_NORM
				
		vector = _DiffuseNorm,0,0,0
		vector = _MetalNorm,0,0,0
		vector = _SmoothnessNorm,0,0,0
		
		mode = update
		
		excludeMesh = flagTransform
		excludeMesh = Flag
	}
	COLORS
	{
		mainColor = steel
		secondColor = steel
		detailColor = steel
	}
}

KSP_TEXTURE_SET
{
	name = AtlasStandard
	title = Atlas I
	recolorable = false
	MATERIAL
	{
		shader = TU/Metallic

		texture = _MainTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Shiny
		texture = _MetallicGlossMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_MetallicSmoothness
		texture = _BumpMap, Bluedog_DB/Parts/Atlas/bluedog_Atlas_Parts1_NRM
		texture = _AOMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_MetallicSmoothness
		
		excludeMesh = flagTransform
		excludeMesh = Flag
	}
}

KSP_TEXTURE_SET
{
	name = AtlasIced
	title = Atlas Iced
	recolorable = false
	MATERIAL
	{
		shader = TU/Metallic

		texture = _MainTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Iced_Colour
		texture = _MetallicGlossMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Iced_MetallicSmoothness
		texture = _BumpMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Iced_NRM
		texture = _AOMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Iced_MetallicSmoothness
		texture = _Thickness, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Iced_SS
		
		keyword = TU_SUBSURF
		float = _SubSurfAmbient, 0.2
		float = _SubSurfScale, 0.5
		float = _SubSurfPower, 2.1
		float = _SubSurfDistortion, 0.1
		float = _SubSurfAttenuation, 0.6
		
		excludeMesh = flagTransform
		excludeMesh = Flag
	}
}

KSP_TEXTURE_SET
{
	name = AtlasIced2
	title = Atlas Iced 2
	recolorable = false
	MATERIAL
	{
		shader = TU/Metallic

		texture = _MainTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Iced_Colour_2
		texture = _MetallicGlossMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Iced_MetallicSmoothness_2
		texture = _BumpMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Iced_NRM
		texture = _AOMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Iced_MetallicSmoothness_2
		texture = _Thickness, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Iced_SS
		
		keyword = TU_SUBSURF
		float = _SubSurfAmbient, 0.2
		float = _SubSurfScale, 0.5
		float = _SubSurfPower, 2.1
		float = _SubSurfDistortion, 0.1
		float = _SubSurfAttenuation, 0.6
		
		excludeMesh = flagTransform
		excludeMesh = Flag
	}
}

KSP_TEXTURE_SET
{
	name = AtlasRecolour
	title = Atlas
	recolorable = true
	MATERIAL
	{
		shader = TU/Metallic

		texture = _MainTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Shiny
		texture = _MetallicGlossMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_MetallicSmoothness
		texture = _BumpMap, Bluedog_DB/Parts/Atlas/bluedog_Atlas_Parts1_NRM
		texture = _AOMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_MetallicSmoothness
		texture = _MaskTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_MASK
		texture = _MetalGlossNormMask, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_MetallicSmoothness_MASK
		keyword = TU_RECOLOR
		keyword = TU_RECOLOR_NORM
		channelMask = 7
		featureMask = 7
		
		vector = _DiffuseNorm,0,0,0
		vector = _MetalNorm,0,0,0
		vector = _SmoothnessNorm,0,0,0
		mode = create
		excludeMesh = flagTransform
		excludeMesh = Flag
	}
	COLORS
	{
		mainColor = atlassteel
		secondColor = silver
		detailColor = silver
	}
}

KSP_TEXTURE_SET
{
	name = AtlasSM-65
	title = Atlas SM-65 Livery
	recolorable = true
	MATERIAL
	{
		shader = TU/Metallic

		//texture = _MainTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_AtlasA
		texture = _MainTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Shiny
		texture = _MetallicGlossMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_AtlasA_MetallicSmoothness
		texture = _BumpMap, Bluedog_DB/Parts/Atlas/bluedog_Atlas_Parts1_NRM
		texture = _AOMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_AtlasA_MetallicSmoothness
		texture = _MaskTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_AtlasA_MASK
		texture = _MetalGlossNormMask, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_AtlasA_MetallicSmoothness_MASK
		keyword = TU_RECOLOR
		keyword = TU_RECOLOR_NORM
		channelMask = 7
		featureMask = 7
		vector = _DiffuseNorm,0,0,0
		vector = _MetalNorm,0,0,0
		vector = _SmoothnessNorm,0,0,0
		mode = create
	}
	COLORS
	{
		mainColor = atlassteel
		secondColor = white
		detailColor = sm65red
	}
}

KSP_TEXTURE_SET
{
	name = ChrayolRed
	title = Chrayol Livery Editor
	recolorable = true
	MATERIAL
	{
		shader = TU/Metallic

		//texture = _MainTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_ChrayolRed
		texture = _MainTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Shiny
		texture = _MetallicGlossMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_ChrayolRed_MetallicSmoothness
		texture = _BumpMap, Bluedog_DB/Parts/Atlas/bluedog_Atlas_Parts1_NRM
		texture = _AOMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_ChrayolRed_MetallicSmoothness
		texture = _MaskTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_ChrayolRed_MASK
		texture = _MetalGlossNormMask, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_ChrayolRed_MetallicSmoothness_MASK
		keyword = TU_RECOLOR
		keyword = TU_RECOLOR_NORM
		channelMask = 7
		featureMask = 7
		vector = _DiffuseNorm,0,0,0
		vector = _MetalNorm,0,0,0
		vector = _SmoothnessNorm,0,0,0
		mode = create
		excludeMesh = flagTransform
 		excludeMesh = Flag
	}
	COLORS
	{
		mainColor = atlassteel
		secondColor = chrayolred
		detailColor = chrayolred
	}
}


KSP_TEXTURE_SET
{
	name = MidasSamos
	title = Midas Samos Livery Editor
	recolorable = true
	MATERIAL
	{
		shader = TU/Metallic

		//texture = _MainTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_MidasSamos
		texture = _MainTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_Shiny
		texture = _MetallicGlossMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_MidasSamos_MetallicSmoothness 
		texture = _BumpMap, Bluedog_DB/Parts/Atlas/bluedog_Atlas_Parts1_NRM
		texture = _AOMap, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_MidasSamos_MetallicSmoothness
		texture = _MaskTex, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_MidasSamos_MASK
		texture = _MetalGlossNormMask, BarkingOwl/AtlasUnlimited/bluedog_Atlas_Parts1_MidasSamos_MetallicSmoothness_MASK
		keyword = TU_RECOLOR
		keyword = TU_RECOLOR_NORM
		channelMask = 7
		featureMask = 7
		vector = _DiffuseNorm,0,0,0
		vector = _MetalNorm,0,0,0
		vector = _SmoothnessNorm,0,0,0
		mode = create
		
		excludeMesh = flagTransform
		excludeMesh = Flag
	}
	COLORS
	{
		mainColor = atlassteel
		secondColor = midasorange
		detailColor = black
	}
}

KSP_TEXTURE_SET
{
	name = AtlasCELV
	title = Atlas CELV
	recolorable = false
	MATERIAL
	{
		shader = TU/Metallic

		texture = _MainTex, BarkingOwl/AtlasUnlimited/bluedog_CELV_Skirt_Shiny
		texture = _MetallicGlossMap, BarkingOwl/AtlasUnlimited/bluedog_CELV_Skirt_MetallicSmoothness
		texture = _BumpMap, Bluedog_DB/Parts/LDC/bluedog_CELV_Skirt_NRM
		texture = _AOMap, BarkingOwl/AtlasUnlimited/bluedog_CELV_Skirt_MetallicSmoothness
		
		Mesh = polySurface250
		Mesh = polySurface241
		Mesh = CELV_Skrrrrt_3:pCube340
		excludeMesh = polySurface247
		excludeMesh = polySurface240
		excludeMesh = polySurface251
		excludeMesh = polySurface252
	}
	MATERIAL
	{
		shader = TU/Metallic

		texture = _MainTex, Bluedog_DB/Parts/LDC/bluedog_LDC_Parts
		texture = _MetallicGlossMap, BarkingOwl/AtlasUnlimited/bluedog_CELV_Bits_MetallicSmoothness
		texture = _BumpMap, Bluedog_DB/Parts/LDC/bluedog_LDC_Parts_NRM
		texture = _AOMap, BarkingOwl/AtlasUnlimited/bluedog_CELV_Bits_MetallicSmoothness
		
		Mesh = polySurface247
		Mesh = polySurface240
		Mesh = polySurface251
		excludeMesh = polySurface250
		excludeMesh = polySurface241
		excludeMesh = CELV_Skrrrrt_3:pCube340
		excludeMesh = polySurface252
	}
}

@PART[bluedog_Atlas_LongFuelTank,bluedog_Atlas_SustainerAdapterTank,bluedog_Atlas_BoosterSkirt,bluedog_CELV_MainTank,bluedog_SLV3X_MainTank]
{
	MODULE
	{
		name = KSPTextureSwitch
		sectionName = Atlas Liveries
		currentTextureSet = AtlasStandard
		
		textureSet = AtlasStandard
		textureSet = AtlasRecolour
		textureSet = AtlasSM-65
		textureSet = ChrayolRed
		textureSet = MidasSamos
		textureSet = AtlasIced
		
	}
	MODULE
	{
		name = SSTURecolorGUI
	}
}

@PART[bluedog_Atlas_AdapterFuelTank,bluedog_Atlas_Decoupler1875m,bluedog_Atlas_FairingBase,bluedog_Atlas_MediumFuelTank,bluedog_Atlas_ShortAdapterTank,bluedog_Atlas_ShortFuelTank,bluedog_Atlas2_RollControlSystem,bluedog_CELV_AdapterTank_1p875m_Long,bluedog_CELV_AdapterTank_1p875m_Short,bluedog_CELV_AdapterTank_2p5m_Long,bluedog_CELV_AdapterTank_2p5m_Short,bluedog_CELV_LongTank,bluedog_CELV_MediumTank,bluedog_CELV_ShortTank,bluedog_SLV3X_LowerTank,bluedog_SLV3X_MediumTank,bluedog_SLV3X_ShortTank,bluedog_SLV3X_UpperTank]
{
	MODULE
	{
		name = KSPTextureSwitch
		sectionName = Atlas Liveries
		currentTextureSet = AtlasStandard
		
		textureSet = AtlasStandard		
		textureSet = AtlasRecolour
		textureSet = AtlasSM-65
		textureSet = AtlasIced
		textureSet = AtlasIced2
		
	}
	MODULE
	{
		name = SSTURecolorGUI
	}
}

@PART[bluedog_Atlas_LR89,bluedog_Atlas_LR101_Inline,bluedog_Atlas_LR101_Radial,bluedog_Atlas_LR105]
{
	MODULE
	{
		name = KSPTextureSwitch
		
		currentTextureSet = AtlasEngines
		
		textureSet = AtlasEngines
		textureSet = AtlasEnginesRecolour
	}
	MODULE
	{
		name = SSTURecolorGUI
	}
}

@PART[bluedog_CELV_SustainerTank,bluedog_CELV_BoosterSkirt,bluedog_CELV_Fin]
{
	MODULE
	{
		name = KSPTextureSwitch
		currentTextureSet = AtlasCELV
		textureSet = AtlasCELV
	}
}

@PART[bluedog_Atlas_LongFuelTank,bluedog_Atlas_BoosterSkirt,bluedog_Atlas_MediumFuelTank]:NEEDS[BDBNIC]:AFTER[BDBNIC]
{
	!MODULE[ModulePartVariants],* {}
}

!PART[bluedog_Atlas_BoosterSkirt_TU,bluedog_Atlas_LongFuelTank_TU,bluedog_Atlas_ShortAdapterTank_TU,bluedog_Atlas_ShortFuelTank_TU,bluedog_Atlas_SustainerAdapterTank_TU,bluedog_Atlas_AdapterFuelTank_TU,bluedog_Atlas_MediumFuelTank_TU]:NEEDS[BDBNIC]:AFTER[BDBNIC]